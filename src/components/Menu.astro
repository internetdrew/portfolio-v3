<div id='menu-control' class='relative sm:text-base'>
  <div
    id='menu'
    class='absolute bg-neutral-800 invisible opacity-0 transition-opacity duration-150 top-8 right-0 min-w-36 border border-neutral-800 rounded-md flex flex-col overflow-hidden sm:static sm:min-w-0 sm:flex-row sm:items-center sm:border-0 sm:gap-4 sm:bg-transparent sm:visible sm:opacity-100'
  >
    <a
      href='/about'
      class='p-2 underline-offset-2 sm:border-b-0 sm:bg-none sm:hover:text-inherit sm:hover:bg-transparent sm:hover:underline sm:p-0'
    >
      About
    </a>
    <a
      href='/blog'
      class='p-2 underline-offset-2 sm:hover:text-inherit sm:hover:bg-transparent sm:hover:underline sm:p-0'
    >
      Blog
    </a>
  </div>
  <div
    id='menu-btn'
    class='flex items-center cursor-pointer transition-colors duration-75 select-none sm:hidden'
  >
    <p>Menu</p>
  </div>
</div>

<script>
  const menuBtn = document.getElementById('menu-btn');
  const menu = document.querySelector('#menu');
  const rightCarat = document.getElementById('carat-icon');
  const menuControl = document.getElementById('menu-control');

  function handleMenu() {
    if (menu?.classList.contains('invisible')) {
      menu.classList.remove('invisible');
      menu.classList.remove('opacity-0');
      menu.classList.add('opacity-100');
      menuBtn?.classList.add('text-pink-500');
      rightCarat?.classList.add('rotate-90');
      return;
    }

    if (menu?.classList.contains('opacity-100')) {
      menu.classList.remove('opacity-100');
      menu.classList.add('invisible');
      menu.classList.add('opacity-0');
      menuBtn?.classList.remove('text-pink-500');
      rightCarat?.classList.remove('rotate-90');
      return;
    }
  }

  menuBtn?.addEventListener('click', handleMenu);

  document.addEventListener('click', e => {
    const menuControlRect = menuControl?.getBoundingClientRect()!;

    const clickX = e.clientX;
    const clickY = e.clientY;

    const outsideClick =
      clickX < menuControlRect?.left ||
      clickX > menuControlRect?.right ||
      clickY < menuControlRect?.top ||
      clickY > menuControlRect?.bottom;

    if (outsideClick) {
      if (menu?.classList.contains('opacity-100')) {
        menu.classList.remove('opacity-100');
        menu.classList.add('invisible');
        menu.classList.add('opacity-0');
        rightCarat?.classList.remove('rotate-90');
        return;
      }
    }
  });
</script>
